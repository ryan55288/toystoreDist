import{_ as B,u as j,m as Q,s as z,r as E,q as H,n as S,a as Y,o as r,c as u,b as t,F as b,h as Z,f as e,t as i,D as $,B as p,e as m,C as k,i as T,v as y,d as G,w as J,l as K,p as W,k as X}from"./index-b0eYXTGv.js";import{u as tt}from"./cart-jhRZaYKm.js";import{u as et}from"./order-DHXOztBy.js";import{e as f}from"./sweetalert-8WZDP0Id.js";import"./sweetalert2.all-cno0K6ji.js";const st="/assets/creditCard2-OaZ0wyU1.svg",c=v=>(W("data-v-adbcd74e"),v=v(),X(),v),at=K('<div class="box1" data-v-adbcd74e></div><section class="section1" data-v-adbcd74e><div class="container" data-v-adbcd74e><ul class="row d-flex justify-content-center align-items-center" data-v-adbcd74e><li class="col-md-4" data-v-adbcd74e>1.訂單資料</li><li class="col-md-4" data-v-adbcd74e>2.付款方式</li><li class="col-md-4" data-v-adbcd74e>3.完成訂單</li></ul></div></section><section class="section2 d-flex justify-content-center pt-40" data-v-adbcd74e><div class="header" data-v-adbcd74e><div data-v-adbcd74e>商品內容</div><div data-v-adbcd74e>數量</div><div data-v-adbcd74e>總計</div></div></section>',3),ot={class:"section3 pt-40"},dt={class:"shopping-card"},lt=["src"],it=c(()=>t("div",{class:"d-flex justify-content-center"},[t("hr")],-1)),nt={class:"section4"},ct={class:"bottom"},rt={class:"text-orange"},ut={class:"section5 pt-100"},mt={class:"container"},vt={class:"row"},_t=c(()=>t("div",{class:"col-md-12 fs-24 fw-bold"},"訂購人資訊",-1)),pt={class:"col-md-12 info"},ft={class:"mt-20"},ht={key:0},bt={class:"section5 pt-90"},yt={class:"container pb-100"},gt={class:"row"},Ct=c(()=>t("div",{class:"col-md-12 fs-24 fw-bold"},"選擇付款方式",-1)),Dt=c(()=>t("hr",{class:"mt-20"},null,-1)),xt={class:"col-md-12 info"},Nt={class:"container"},St={class:"row"},$t={class:"d-flex align-items-center cursor-pointer"},kt={class:"d-flex align-items-center cursor-pointer"},Tt={class:"col-md-6"},Vt=c(()=>t("label",{for:"cardNumber",class:"form-label"},"信用卡",-1)),qt={class:"col-md-6"},Lt=c(()=>t("label",{for:"safeCode",class:"form-label"},"安全碼",-1)),It={class:"col-md-6"},Pt=c(()=>t("label",{for:"inValidDate",class:"form-label"},"到期月份",-1)),Ut={class:"section6 pb-200"},wt={class:"all-button"},At=c(()=>t("div",null,[t("button",{class:"btn1"},"上一步")],-1)),Ft={__name:"CheckList2",setup(v){const V=j(),_=Q().query.isDirect,g=tt(),{removeFinishedProducts:q}=g,{getSelectedCartList:C,getSelectedCartListAmountTotal:D,getCustomerInfo:n,getDirectPurchase:x,getDirectPurchaseAmountTotal:N,getSelectedProductAllQty:L}=z(g),I=et(),{addOrderHandle:P}=I,l=E(0),U=()=>{if(l.value===0){f("請選擇支付方式");return}if(l.value===1)if(d.cardNumber)if(d.safeCode){if(!d.inValidDate){f("請填寫到期月份");return}}else{f("請填寫安全碼");return}else{f("請填寫信用卡號");return}return!0},w=()=>{const a=Math.floor(Math.random()*9e5)+1e5;return`${new Date().getTime()}${a}`};function A(){var a=new Date,s=a.getFullYear(),h=(a.getMonth()+1).toString().padStart(2,"0"),o=a.getDate().toString().padStart(2,"0"),R=s+h+o;return R}const F=()=>C.value.reduce((a,s)=>a+s.qty,0),M=()=>({orderNumber:w(),orderDate:A(),qty:_?x.value[0].qty:F(),amount:_?N.value:D.value,invoice:n.value.invoiceType===1?"載具":"紙本發票",payment:l.value===1?"信用卡":"貨到付款",delivery:n.value.deliveryType===1?"到店取貨":"宅配到府"}),O=()=>{U()&&(P(M()),q(),V.push("/CheckList3"))},d=H({cardNumber:"",safeCode:"",inValidDate:""});return S(()=>d.cardNumber,(a,s)=>{a.length===4&&(d.cardNumber=a+" "),a.length===9&&(d.cardNumber=a+" "),a.length===14&&(d.cardNumber=a+" "),s.length>a.length&&(d.cardNumber=a)}),S(()=>d.inValidDate,(a,s)=>{a.length===2&&(d.inValidDate=a+"/"),s.length>a.length&&(d.inValidDate=a)}),(a,s)=>{const h=Y("router-link");return r(),u(b,null,[at,t("section",ot,[(r(!0),u(b,null,Z(e(_)?e(x):e(C),o=>(r(),u("div",dt,[t("div",null,[t("img",{src:o.picture},null,8,lt),t("div",null,i(o.name),1)]),t("div",null,i(o.qty),1),t("div",null,i(`$${o.price*o.qty}`),1)]))),256)),it]),t("section",nt,[t("div",ct,[t("div",null,i(`商品總數:${e(L)}`),1),t("div",rt,i(`總計$${e(_)?e(N):e(D)}`),1)])]),t("section",ut,[t("div",mt,[t("div",vt,[_t,t("div",pt,[t("div",ft,i(`姓名:${e(n).name}`),1),t("div",null,i(`行動電話:${e(n).phone}`),1),t("div",null,i(`住址:${e(n).address}`),1),t("div",null,i(`信箱:${e(n).email}`),1),t("div",null,i(`發票類型:${e(n).invoiceType===1?"載具":"紙本發票"}`),1),e(n).invoiceType===1?(r(),u("div",ht,i(`載具編號:${e(n).vehicle}`),1)):$("",!0)])])])]),t("section",bt,[t("div",yt,[t("div",gt,[Ct,Dt,t("div",xt,[t("div",Nt,[t("form",St,[t("div",{class:"col-md-6",onClick:s[1]||(s[1]=o=>l.value=1)},[t("div",$t,[t("img",{class:p(["payment-layout me-3 payment-border",{"payment-border-active":e(l)===1}]),src:st,alt:""},null,2),t("label",null,[m(t("input",{type:"radio",name:"payment",value:1,"onUpdate:modelValue":s[0]||(s[0]=o=>T(l)?l.value=o:null)},null,512),[[k,e(l)]]),t("span",{class:p(["custom-radio",{"custom-radio-active":e(l)===1}])},null,2)])])]),t("div",{class:"col-md-6",onClick:s[3]||(s[3]=o=>l.value=2)},[t("div",kt,[t("div",{class:p(["payment-layout me-3 payment-border",{"payment-border-active":e(l)===2}])}," 貨到付款 ",2),t("label",null,[m(t("input",{type:"radio",name:"payment",value:2,"onUpdate:modelValue":s[2]||(s[2]=o=>T(l)?l.value=o:null)},null,512),[[k,e(l)]]),t("span",{class:p(["custom-radio",{"custom-radio-active":e(l)===2}])},null,2)])])]),e(l)===1?(r(),u(b,{key:0},[t("div",Tt,[Vt,m(t("input",{type:"text",class:"form-control",id:"cardNumber",placeholder:"請輸入信用卡",maxlength:"19","onUpdate:modelValue":s[4]||(s[4]=o=>e(d).cardNumber=o)},null,512),[[y,e(d).cardNumber]])]),t("div",qt,[Lt,m(t("input",{placeholder:"請輸入安全碼",type:"text",class:"form-control",id:"safeCode",maxlength:"3","onUpdate:modelValue":s[5]||(s[5]=o=>e(d).safeCode=o)},null,512),[[y,e(d).safeCode]])]),t("div",It,[Pt,m(t("input",{type:"text",class:"form-control",id:"inValidDate",placeholder:"請輸入到期月份 ex: 05/24",maxlength:"5","onUpdate:modelValue":s[6]||(s[6]=o=>e(d).inValidDate=o)},null,512),[[y,e(d).inValidDate]])])],64)):$("",!0)])])])])])]),t("section",Ut,[t("div",wt,[G(h,{to:"/CheckList1",class:"text-decoration-none text-white"},{default:J(()=>[At]),_:1}),t("div",null,[t("button",{class:"btn2",onClick:O},"完成訂單")])])])],64)}}},zt=B(Ft,[["__scopeId","data-v-adbcd74e"]]);export{zt as default};
